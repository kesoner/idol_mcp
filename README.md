# 🎤 IdolMCP — 偶像型虛擬角色 Chatbot 系統

> 「她不是回答問題的工具，她是能被喜歡、被記住的存在。」

IdolMCP 是一套基於 **多模組控制平台（MCP）** 與資料庫驅動的聊天機器人架構，用來打造具備**個性、記憶、情緒變化**的虛擬偶像角色。專案目標是實現一位可以與人互動、擁有成長曲線的 AI 角色。

## 📋 目錄

- [系統需求](#-系統需求)
- [功能特點](#-功能特點)
- [架構概覽](#-架構概覽)
- [使用技術](#-使用技術)
- [快速開始](#-快速開始)
- [配置說明](#-配置說明)
- [開發指南](#-開發指南)
- [常見問題](#-常見問題)
- [貢獻指南](#-貢獻指南)
- [授權說明](#-授權說明)
- [聯絡方式](#-聯絡方式)

## 💻 系統需求

- Python 3.8+
- 至少 4GB RAM
- 穩定的網路連接
- 支援的作業系統：Windows 10+, macOS 10.15+, Linux

## ✨ 功能特點

### 1. 核心功能
- **即時對話**：支持自然語言對話，理解用戶輸入並生成回應
- **情感表達**：通過 Live2D 模型展示豐富的表情和動作
- **個性化回應**：根據角色設定生成符合人設的回應
- **記憶系統**：記錄對話歷史，提供上下文感知的回應

### 2. 技術特點
- **前端**：
  - React 框架
  - Live2D 模型展示
  - 響應式設計
  - 即時消息更新
  - 表情和情緒顯示

- **後端**：
  - FastAPI 框架
  - 情感引擎
  - 記憶系統
  - LLM 集成
  - 角色設定管理

### 3. 系統組件

#### 3.1 情感引擎 (Emotion Engine)
- 多種情感狀態：NEUTRAL, HAPPY, EXCITED, SAD, ANGRY, SHY, CONFIDENT
- 情感強度控制
- 情感狀態轉換
- 表情映射系統

#### 3.2 記憶系統 (Memory System)
- 對話歷史記錄
- 標籤分類
- 記憶檢索
- 上下文管理

#### 3.3 角色設定 (Persona)
- 可自定義角色名稱
- 個性設定
- 說話風格
- 興趣愛好
- 記憶標籤

#### 3.4 LLM 服務 (LLM Service)
- 支持多種 LLM 提供商
- 可配置的模型參數
- 上下文感知
- 風格控制

### 4. 用戶界面
- 登錄/登出功能
- 聊天界面
- Live2D 模型展示
- 情緒狀態顯示
- 消息歷史記錄
- 實時字幕

## 🧠 架構概覽

```
User ↔ MCP Server ↔ Persona / Emotion / Memory 模組 ↕ Database ↕ Gemini / LLM API
```

### 核心組件

- **MCP Server**：接收使用者訊息、調用各模組邏輯
- **Persona 模組**：決定角色的語氣、反應風格與人設
- **Emotion Engine**：根據上下文或情緒事件調整語調與行為
- **Memory System**：記住使用者偏好、角色經歷、對話紀錄
- **LLM 生成層**：自然語言生成，具備偶像風格的回應語句

## 🧩 使用技術

| 類別       | 技術／工具                   |
|------------|------------------------------|
| 語言模型    | Google 2 FLASH / OpenAI GPT |
| MCP 架構   | FastAPI      |
| 資料儲存    | SQLite / MySQL / PostgreSQL   |
| 模組管理    | Python MCP Server       |
| 前端（可選）|  Web Chat UI  |

## 🚀 快速開始

1. 克隆專案
```bash
git clone https://github.com/yourname/idolmcp.git
cd idolmcp
```

2. 安裝依賴
```bash
pip install -r requirements.txt
```

3. 配置環境變數
```bash
cp .env.example .env
# 編輯 .env 文件，填入必要的 API 金鑰
```

4. 啟動服務
```bash
python run.py
```

## ⚙️ 配置說明

### Persona 設定範例
```json
{
  "name": "星野 愛",
  "style": "完美偶像 / 神秘感 / 像謎一樣的女子",
  "greeting": "偶像的謊言，也是愛的一種形式喔♪",
  "speech_tone": "柔和迷人、略帶算計、貼近粉絲幻想",
  "likes": ["舞台表演", "孩子", "被喜歡"],
  "memory_tags": ["愛與謊言", "母性", "舞台"]
}
```

### 記憶系統功能
- 根據使用者 ID 建立個人 session
- 記住使用者的提問主題、喜好關鍵詞
- 儲存與角色相關的互動事件（如生日快樂、第一次見面等）

### 待實裝功能

#### 1. 情感系統增強
- **情緒狀態機（FSM）**：實現更複雜的情緒轉換邏輯
- **情緒觸發器**：基於關鍵詞和上下文的情緒變化
- **情緒記憶**：記錄長期情緒狀態和變化趨勢
- **情緒表達動畫**：更豐富的 Live2D 表情和動作

#### 2. 互動功能
- **偶像日誌系統**：自動生成每日活動記錄
- **社交媒體模擬**：
  - 發推文功能
  - 直播
  - 自動切片
  - 粉絲互動記錄
- **語音系統**：
  - 語音合成
  - 語音識別

#### 3. 成長系統
- **粉絲等級系統**：
  - 互動積分
  - 成就系統
  - 特殊稱號
- **角色成長曲線**：
  - 技能解鎖
  - 性格發展
  - 記憶深度

#### 4. 記憶系統增強
- **長期記憶**：重要事件和情感的持久化存儲
- **記憶關聯**：建立記憶之間的聯繫
- **記憶檢索優化**：更智能的上下文相關性判斷
- **記憶情感標記**：為記憶添加情感標籤
- **記憶拓樸**：將記憶添加透過時間及重要程度劃分標籤並用結構化的方式儲存

#### 5. 多平台支持
- **YT 直播功能**：完整的 Youtube 直播互動集成
- **Discord 機器人**：完整的 Discord 集成
- **LINE 機器人**：LINE 平台支持
- **跨平台同步**：用戶數據和進度同步
- **跨維度互動**：Nexbot 

#### 6. 分析工具
- **對話分析**：統計和分析對話內容
- **情緒分析**：追蹤情緒變化趨勢
- **用戶行為分析**：分析用戶互動模式
- **性能監控**：系統運行狀態監控

#### 7. 開發者工具
- **API 文檔**：完整的 API 參考
- **調試工具**：開發和測試工具
- **日誌系統**：詳細的運行日誌
- **配置管理**：更靈活的配置選項

這些功能將分階段實現，優先考慮核心功能的穩定性和用戶體驗。

## ❓ 常見問題

1. **Q: 如何更換語言模型？**
   A: 在 `.env` 文件中修改 `LLM_PROVIDER` 和相應的 API 金鑰。

2. **Q: 如何自定義角色性格？**
   A: 修改 `config/persona.json` 文件中的設定。

3. **Q: 記憶系統如何運作？**
   A: 系統會自動記錄對話內容，並根據設定的標籤進行分類存儲。

## 🤝 貢獻指南

歡迎提交 Pull Request 或提出 Issue！在提交之前，請確保：
1. 代碼符合專案的編碼規範
2. 添加適當的測試
3. 更新相關文檔

## 📜 授權說明

本專案採用 MIT License 授權。

## 📬 聯絡方式

如果你也想做自己的偶像型 AI，或想一起打磨角色設計，歡迎聯絡我！

- Email: kesoner666@gmail.com
- GitHub: [Kesoner](https://github.com/yourusername)
